- job: DeployInfra
  pool:
    name: Default   # usa seu agente self-hosted
  steps:
  - checkout: self
  - script: |
      cd infra
      terraform init
      terraform apply -auto-approve
    displayName: 'Terraform Apply'
  - task: AzureWebApp@1
    inputs:
      azureSubscription: $(azureServiceConnection)
      appName: 'node-meuprojetoweb-dev'
      package: '$(System.DefaultWorkingDirectory)/app'
      runtimeStack: 'NODE|18-lts'
      startUpCommand: 'npm start'
